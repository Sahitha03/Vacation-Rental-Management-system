<% layout("/layouts/boilerplate") %>
<head>
  <style>
   
    #filters{
      display: flex;
      flex-wrap: wrap;
    }
    .filter{
      text-align: center;
      margin-right: 1.8rem;
      margin-top: 1rem;
      opacity: 0.7;
    }
    .filter p{
      font-size: 0.8rem;
    }
    .filter:hover{
      opacity: 1;
      cursor: pointer;
    }
    .filter a{
      color: inherit;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div id="filters">
<div class="filter">
      <a href="/listings/trending"><i class="fa-solid fa-fire"></i></a>
      <p>Trending</p>
    </div>
    <div class="filter">
      <a href="/listings/rooms"><i class="fa-solid fa-bed"></i></a>
      <p>Rooms</p>
    </div>
    <div class="filter">
     <a href="/listings/iconiccities"><i class="fa-solid fa-mountain-city"></i></a>
      <p>Iconic cities</p>
    </div>
    <div class="filter">
    <a href="/listings/mountains"><i class="fa-solid fa-mountain"></i></a>
      <p>Mountains</p>
    </div>
    <div class="filter">
      <a href="/listings/castles"><i class="fa-brands fa-fort-awesome"></i></a>
      <p>Castles</p>
    </div>
    <div class="filter">
    <a href="/listings/pools"><i class="fa-solid fa-person-swimming"></i></a>
      <p>Pools</p>
    </div>
    <div class="filter">
     <a href="/listings/camping"><i class="fa-solid fa-campground"></i></a>
      <p>Camping</p>
    </div>
    <div class="filter">
     <a href="/listings/farms"><i class="fa-solid fa-wheat-awn"></i></a>
      <p>Farms</p>
    </div>
    <div class="filter">
     <a href="/listings/arctic"><i class="fa-regular fa-snowflake"></i></a>
      <p>Arctic</p>
    </div>
    <div class="filter">
     <a href="/listings/boats"><i class="fa-solid fa-sailboat"></i></a>
      <p>Boats</p>
    </div>
    <div class="filter">
      <a href="/listings/lakes"><i class="fa-solid fa-water"></i></a>
      <p>Lakes</p>
    </div>
    <div class="filter">
      <a href="/listings/tinyhomes"><i class="fa-solid fa-house-chimney"></i></a>
      <p>Tiny homes</p>
    </div>
  </div>
  <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-1">
    <% for (let listing of allListings) { %>
      <a href="/listings/<%= listing._id %>" class="listing-link">
        <div class="card col listing-card rounded-3">
          <!-- Bootstrap Carousel -->
          <div id="carousel<%= listing._id %>" class="carousel slide">
            <div class="carousel-inner" style="border-radius: 1.5rem !important;">
              <% if (listing.images && listing.images.length > 0) { %>
                <% listing.images.forEach((image, index) => { %>
                  <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                    <img 
                      src="<%= image.url %>" 
                      class="d-block w-100 rounded-3" 
                      alt="listing_image" 
                      width="500px" 
                      height="230px" 
                    />
                  </div>
                <% }) %>
              <% } else { %>
                <div class="carousel-item active">
                  <img 
                    src="https://images.unsplash.com/photo-1513368967035-cbc26a7a56bc?crop=entropy&cs=tinysrgb&fit=max&ixid=MnwzNjUyOXwwfDF8c2VhcmNofDJ8fGxha2V8ZW58MHx8fHx8fDE%3D&ixlib=rb-1.2.1&q=80&w=400" 
                    class="d-block w-100 rounded-3" 
                    alt="default_image" 
                    width="500px" 
                    height="230px" 
                  />
                </div>
              <% } %>
            </div>
            <!-- Carousel Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel<%= listing._id %>" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel<%= listing._id %>" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <p class="card-text">
              <%= listing.title %><br/>
              <b>&#8377;<%= listing.price ? listing.price.toLocaleString("en-IN") : "Price not available" %><br/></b>
            </p>
          </div>
        </div>    
      </a>
    <% } %>
  </div>
</body>
